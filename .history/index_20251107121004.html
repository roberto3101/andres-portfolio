<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Portafolio de Andres Alvaro Sanchez Trujillo - Desarrollador Full Stack Junior" />
    <meta name="keywords" content="desarrollador, fullstack, java, spring boot, react, portfolio" />
    <meta name="author" content="Andres Alvaro Sanchez Trujillo" />
    <title>Andres Sanchez - Desarrollador Full Stack</title>
    
    <style>
      /* Widget Flotante con Nebulosa */
      .translator-widget {
        position: fixed;
        top: 100px;
        right: 20px;
        z-index: 9999;
        cursor: move;
      }

      .nebula-background {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 150px;
        height: 150px;
        pointer-events: none;
        z-index: -1;
      }

      .nebula-core {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 80px;
        height: 80px;
        background: radial-gradient(circle, rgba(74, 144, 226, 0.4) 0%, rgba(80, 201, 255, 0.2) 50%, transparent 100%);
        border-radius: 50%;
        animation: nebulaRotate 20s linear infinite, nebulaPulse 3s ease-in-out infinite;
        filter: blur(10px);
      }

      .nebula-glow {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 150px;
        height: 150px;
        background: radial-gradient(circle, rgba(80, 201, 255, 0.2) 0%, rgba(74, 144, 226, 0.1) 40%, transparent 70%);
        border-radius: 50%;
        animation: nebulaRotate 30s linear infinite reverse, nebulaPulse 4s ease-in-out infinite;
        filter: blur(15px);
      }

      .translator-button {
        position: relative;
        width: 70px;
        height: 70px;
        border-radius: 50%;
        background: rgba(15, 12, 41, 0.9);
        backdrop-filter: blur(10px);
        border: 2px solid rgba(74, 144, 226, 0.5);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 0.3rem;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 
          0 0 30px rgba(74, 144, 226, 0.4),
          inset 0 0 20px rgba(74, 144, 226, 0.2);
      }

      .translator-button:hover {
        transform: scale(1.1);
        border-color: rgba(80, 201, 255, 0.8);
        box-shadow: 
          0 0 40px rgba(80, 201, 255, 0.6),
          inset 0 0 30px rgba(80, 201, 255, 0.3);
      }

      .translator-button svg {
        width: 24px;
        height: 24px;
        fill: #4a90e2;
      }

      .current-flag {
        font-size: 1.2rem;
      }

      .language-panel {
        position: absolute;
        top: 0;
        left: 0;
        background: rgba(15, 12, 41, 0.95);
        backdrop-filter: blur(15px);
        border: 2px solid rgba(74, 144, 226, 0.5);
        border-radius: 20px;
        padding: 1rem;
        width: 280px;
        box-shadow: 
          0 10px 50px rgba(0, 0, 0, 0.5),
          0 0 40px rgba(74, 144, 226, 0.3);
        display: none;
      }

      .language-panel.active {
        display: block;
        animation: panelFadeIn 0.3s ease-out;
      }

      .panel-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 0.5rem;
      }

      .close-button {
        background: none;
        border: none;
        color: #4a90e2;
        font-size: 1.5rem;
        cursor: pointer;
        transition: all 0.3s ease;
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
      }

      .close-button:hover {
        background: rgba(74, 144, 226, 0.2);
        color: #50c9ff;
        transform: rotate(90deg);
      }

      .panel-title {
        color: #4a90e2;
        font-size: 1.1rem;
        margin-bottom: 1rem;
        text-align: center;
        font-weight: 600;
      }

      .language-list {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      .lang-button {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 0.8rem 1rem;
        background: rgba(74, 144, 226, 0.1);
        border: 1px solid rgba(74, 144, 226, 0.3);
        border-radius: 10px;
        color: #b8c5d6;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 1rem;
        font-family: 'Inter', sans-serif;
      }

      .lang-button:hover {
        background: rgba(74, 144, 226, 0.2);
        border-color: rgba(74, 144, 226, 0.5);
        transform: translateX(5px);
      }

      .lang-button.active {
        background: rgba(74, 144, 226, 0.3);
        border-color: #4a90e2;
        color: #50c9ff;
        font-weight: 600;
      }

      .lang-flag {
        font-size: 1.5rem;
      }

      .loading-indicator {
        color: #50c9ff;
        font-size: 0.8rem;
        text-align: center;
        margin-top: 0.5rem;
        display: none;
      }

      .loading-indicator.show {
        display: block;
      }

      @keyframes nebulaRotate {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
      }

      @keyframes nebulaPulse {
        0%, 100% {
          opacity: 0.6;
          transform: translate(-50%, -50%) scale(1);
        }
        50% {
          opacity: 1;
          transform: translate(-50%, -50%) scale(1.1);
        }
      }

      @keyframes panelFadeIn {
        from {
          opacity: 0;
          transform: scale(0.9);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      /* Ocultar widget de Google Translate */
      #google_translate_element {
        display: none !important;
      }

      .goog-te-banner-frame {
        display: none !important;
      }

      body {
        top: 0 !important;
      }

      .skiptranslate {
        display: none !important;
      }

      /* Responsive */
      @media (max-width: 768px) {
        .translator-widget {
          display: none;
        }
      }
    </style>
  </head>
  <body>
    <!-- Widget Personalizado -->
    <div class="translator-widget" id="translatorWidget">
      <div class="nebula-background">
        <div class="nebula-core"></div>
        <div class="nebula-glow"></div>
      </div>

      <button class="translator-button" id="translatorButton">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
          <path d="M352 256c0 22.2-1.2 43.6-3.3 64H163.3c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64H348.7c2.2 20.4 3.3 41.8 3.3 64zm28.8-64H503.9c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64H380.8c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64zm112.6-32H376.7c-10-63.9-29.8-117.4-55.3-151.6c78.3 20.7 142 77.5 171.9 151.6zm-149.1 0H167.7c6.1-36.4 15.5-68.6 27-94.7c10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5c11.6 26 20.9 58.2 27 94.7zm-209 0H18.6C48.6 85.9 112.2 29.1 190.6 8.4C165.1 42.6 145.3 96.1 135.3 160zM8.1 192H131.2c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64H8.1C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64zM194.7 446.6c-11.6-26-20.9-58.2-27-94.6H344.3c-6.1 36.4-15.5 68.6-27 94.6c-10.5 23.6-22.2 40.7-33.5 51.5C272.6 508.8 263.3 512 256 512s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6C112.2 482.9 48.6 426.1 18.6 352H135.3zm358.1 0c-30 74.1-93.6 130.9-171.9 151.6c25.5-34.2 45.2-87.7 55.3-151.6H493.4z"/>
        </svg>
        <span class="current-flag" id="currentFlag">üá™üá∏</span>
      </button>

      <div class="language-panel" id="languagePanel">
        <div class="panel-header">
          <button class="close-button" id="closeButton">√ó</button>
        </div>
        <h3 class="panel-title">Selecciona Idioma</h3>
        <div class="language-list">
          <button class="lang-button active" data-lang="es" data-flag="üá™üá∏">
            <span class="lang-flag">üá™üá∏</span>
            <span>Espa√±ol</span>
          </button>
          <button class="lang-button" data-lang="en" data-flag="üá¨üáß">
            <span class="lang-flag">üá¨üáß</span>
            <span>English</span>
          </button>
          <button class="lang-button" data-lang="pt" data-flag="üáµüáπ">
            <span class="lang-flag">üáµüáπ</span>
            <span>Portugu√™s</span>
          </button>
          <button class="lang-button" data-lang="fr" data-flag="üá´üá∑">
            <span class="lang-flag">üá´üá∑</span>
            <span>Fran√ßais</span>
          </button>
          <button class="lang-button" data-lang="de" data-flag="üá©üá™">
            <span class="lang-flag">üá©üá™</span>
            <span>Deutsch</span>
          </button>
          <button class="lang-button" data-lang="it" data-flag="üáÆüáπ">
            <span class="lang-flag">üáÆüáπ</span>
            <span>Italiano</span>
          </button>
        </div>
        <div class="loading-indicator" id="loadingIndicator">Cargando traductor...</div>
      </div>
    </div>

    <!-- Google Translate Element (Oculto) -->
    <div id="google_translate_element"></div>
    
    <div id="root"></div>

    <!-- Google Translate Script -->
    <script type="text/javascript">
      let isGoogleTranslateReady = false;
      
      function googleTranslateElementInit() {
        new google.translate.TranslateElement({
          pageLanguage: 'es',
          includedLanguages: 'en,es,pt,fr,de,it',
          layout: google.translate.TranslateElement.InlineLayout.SIMPLE
        }, 'google_translate_element');
        
        // Esperar a que el widget est√© completamente cargado
        const checkInterval = setInterval(() => {
          const selectElement = document.querySelector('.goog-te-combo');
          if (selectElement) {
            isGoogleTranslateReady = true;
            clearInterval(checkInterval);
            console.log('‚úÖ Google Translate listo!');
            document.getElementById('loadingIndicator').classList.remove('show');
          }
        }, 100);
      }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <!-- Widget Script -->
    <script>
      // Variables
      const translatorButton = document.getElementById('translatorButton');
      const languagePanel = document.getElementById('languagePanel');
      const closeButton = document.getElementById('closeButton');
      const currentFlag = document.getElementById('currentFlag');
      const translatorWidget = document.getElementById('translatorWidget');
      const loadingIndicator = document.getElementById('loadingIndicator');
      let currentLang = 'es';

      // Toggle panel
      translatorButton.addEventListener('click', (e) => {
        e.stopPropagation();
        languagePanel.classList.toggle('active');
      });

      closeButton.addEventListener('click', (e) => {
        e.stopPropagation();
        languagePanel.classList.remove('active');
      });

      // Cerrar al hacer click fuera
      document.addEventListener('click', (e) => {
        if (!translatorWidget.contains(e.target)) {
          languagePanel.classList.remove('active');
        }
      });

      // Event listeners para los botones de idioma
      document.querySelectorAll('.lang-button').forEach(button => {
        button.addEventListener('click', function() {
          const langCode = this.getAttribute('data-lang');
          const flag = this.getAttribute('data-flag');
          changeLanguage(langCode, flag, this);
        });
      });

      // Funci√≥n para cambiar idioma con reintentos
      function changeLanguage(langCode, flag, buttonElement) {
        console.log('üåê Cambiando a: ' + langCode);
        
        if (!isGoogleTranslateReady) {
          loadingIndicator.classList.add('show');
          console.log('‚è≥ Google Translate a√∫n no est√° listo, esperando...');
          
          // Reintentar cada 500ms hasta que est√© listo
          const retryInterval = setInterval(() => {
            if (isGoogleTranslateReady) {
              clearInterval(retryInterval);
              loadingIndicator.classList.remove('show');
              performLanguageChange(langCode, flag, buttonElement);
            }
          }, 500);
          
          // Timeout de 10 segundos
          setTimeout(() => {
            clearInterval(retryInterval);
            loadingIndicator.classList.remove('show');
            if (!isGoogleTranslateReady) {
              alert('El traductor est√° tardando en cargar. Por favor, recarga la p√°gina.');
            }
          }, 10000);
          
          return;
        }
        
        performLanguageChange(langCode, flag, buttonElement);
      }

      function performLanguageChange(langCode, flag, buttonElement) {
        // Actualizar flag actual
        currentFlag.textContent = flag;
        currentLang = langCode;

        // Actualizar botones activos
        document.querySelectorAll('.lang-button').forEach(btn => {
          btn.classList.remove('active');
        });
        buttonElement.classList.add('active');

        // Activar Google Translate
        const selectElement = document.querySelector('.goog-te-combo');
        if (selectElement) {
          selectElement.value = langCode;
          selectElement.dispatchEvent(new Event('change'));
          console.log('‚úÖ Idioma cambiado a: ' + langCode);
        } else {
          console.error('‚ùå Error: No se encontr√≥ el selector de Google Translate');
        }

        // Cerrar panel
        languagePanel.classList.remove('active');
      }

      // Hacer el widget arrastrable
      let isDragging = false;
      let currentX;
      let currentY;
      let initialX;
      let initialY;

      translatorWidget.addEventListener('mousedown', dragStart);
      document.addEventListener('mousemove', drag);
      document.addEventListener('mouseup', dragEnd);

      function dragStart(e) {
        if (e.target === translatorButton || e.target.closest('.translator-button')) {
          initialX = e.clientX - translatorWidget.offsetLeft;
          initialY = e.clientY - translatorWidget.offsetTop;
          isDragging = true;
        }
      }

      function drag(e) {
        if (isDragging) {
          e.preventDefault();
          currentX = e.clientX - initialX;
          currentY = e.clientY - initialY;
          
          // L√≠mites de pantalla
          const maxX = window.innerWidth - 300;
          const maxY = window.innerHeight - 70;
          
          currentX = Math.max(20, Math.min(currentX, maxX));
          currentY = Math.max(20, Math.min(currentY, maxY));
          
          translatorWidget.style.left = currentX + 'px';
          translatorWidget.style.top = currentY + 'px';
          translatorWidget.style.right = 'auto';
        }
      }

      function dragEnd() {
        isDragging = false;
      }
    </script>

    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>